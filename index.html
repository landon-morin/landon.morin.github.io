<html>
<head>
    <title>Electron Authentication Page</title>
    <link rel="stylesheet" href="/twitch_misc/style.css" />
</head>
<body>
    <div id="output">Please click this link to continue if not automatically redirected</div>

    <p><a href="https://id.twitch.tv/oauth2/authorize?client_id=lmrzz1mmhe84xglle6zanbexjbtinh&redirect_uri=https%3A%2F%2Flandon.morin.github.io/landon.morin.github.io%2Ftwitch_misc%2Fauthentication%2Felectron%2Fwebpage%2F&response_type=token">Login with Twitch</a></a></p>

    <script type="text/javascript">
        if (document.location.hash && document.location.hash != '') {
            var parsedHash = new URLSearchParams(window.location.hash.slice(1));
            if (parsedHash.get('access_token')) {
                // try for electron?
                window.location.href = `twitch-misc-example://twitchauth/${parsedHash.get('access_token')}`;
                // and tidy up
                window.location.href = 'https://landon-morin.github.io/landon.morin.github.io/twitch_misc/authentication/electron/webpage/#safetoclose';
                // and tell the user they can close the page
                output.textContent = 'It is safe to close this window';
            }
        } else {
            // attempt redirect
            window.location.href = 'https://id.twitch.tv/oauth2/authorize?client_id=lmrzz1mmhe84xglle6zanbexjbtinh&redirect_uri=https%3A%2F%2Flandon.morin.github.io/landon.morin.github.io%2Ftwitch_misc%2Fauthentication%2Felectron%2Fwebpage%2F&response_type=token';
        }
    </script>
</body>
</html>